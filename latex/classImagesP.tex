\hypertarget{classImagesP}{\section{Référence de la classe Images\-P}
\label{classImagesP}\index{Images\-P@{Images\-P}}
}


{\ttfamily \#include $<$images.\-h$>$}

\subsection*{Fonctions membres publiques}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classImagesP_a18ff58308b1ba5787e1d05f0acd7224a}{Images\-P} ()
\item 
\hyperlink{classImagesP_abd4ea58f9cb814dbb27feb5d2d793e53}{$\sim$\-Images\-P} ()
\item 
void \hyperlink{classImagesP_ae2aecf8db20e7b3bcd14a7182dfdaf29}{start\-Block} ()
\item 
void \hyperlink{classImagesP_aeb7483dee60e755fffcc9e6f9355fd43}{save\-Calib} (std\-::string str)
\item 
Point2f \hyperlink{classImagesP_a4048e5f515cb51cbf25211ec8b4854b7}{load\-Calib} ()
\item 
void \hyperlink{classImagesP_a799c4550d96659d7d188b03f52bb9f4a}{calibration} ()
\item 
Point \hyperlink{classImagesP_afe9cff50f49fc67bd8938d8d0223fe81}{get\-Car\-Position} ()
\item 
Point \hyperlink{classImagesP_aaf0d33634f747f1defec833fbc6dfae2}{get\-Arrival\-Position} ()
\item 
uint8\-\_\-t \hyperlink{classImagesP_a002bb2f3148a85c46c954dcc98ad2760}{get\-Size\-Marker} ()
\item 
void \hyperlink{classImagesP_adf17333e9b35092e96fef60bbbf80d74}{tracking\-Car} ()
\end{DoxyCompactItemize}
\subsection*{Attributs publics}
\begin{DoxyCompactItemize}
\item 
std\-::vector$<$ Point $>$ \hyperlink{classImagesP_ab9e279526694a7ce421cfa11b9309ed1}{all\-\_\-block}
\item 
Point \hyperlink{classImagesP_a79d1d01bae703caeee1033425e4f8f18}{pos\-Car}
\item 
Point \hyperlink{classImagesP_a621b649c63d3967849103c03082af64c}{pos\-Arrival}
\item 
float \hyperlink{classImagesP_a39c69bdd9469b4b8a2c9666e27afa7b0}{angle\-Car}
\item 
float \hyperlink{classImagesP_a408c61aeceb9175481adb2daca707a48}{angle\-Arrival}
\end{DoxyCompactItemize}
\subsection*{Fonctions membres privées}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classImagesP_a0527e504ca88cece33edb90fef958c90}{init} ()
\item 
void \hyperlink{classImagesP_af8bad8cf7cb3be74c084a0efc86ca73f}{markers\-Processing} (Point2f center\-Pt)
\item 
Point \hyperlink{classImagesP_a0b371e65a472c1cce7d6dc83bd171e4d}{get\-X\-Y\-Matrix} (int16\-\_\-t x\-\_\-matrix, int16\-\_\-t y\-\_\-matrix)
\item 
Point2f \hyperlink{classImagesP_a9e709b963a13bc9dff823815e5e66200}{get\-Block\-Matrice} (Point2f center, int16\-\_\-t x\-\_\-pixel, int16\-\_\-t y\-\_\-pixel)
\item 
float \hyperlink{classImagesP_a03b81fad0317e9939085c5e7538c2efe}{get\-Angle} (Marker marker)
\item 
void \hyperlink{classImagesP_a4eee68c40eb47b29e0b738ea38a55353}{draw\-Matrix} (Mat \&frame, Point center)
\item 
bool \hyperlink{classImagesP_a4e8b4ba0f6f6f408de4cc4c52ac29f27}{willbe\-Block} (Mat \&frame, Point left\-Top, int8\-\_\-t pixel\-Max)
\item 
void \hyperlink{classImagesP_aab5950c25ea44c06bc4026ce6dece7fa}{fill\-Rotated\-Rect} (Mat \&frame, Point2f center, Size2f size, Scalar color, float angle)
\end{DoxyCompactItemize}
\subsection*{Attributs privés}
\begin{DoxyCompactItemize}
\item 
Marker\-Detector \hyperlink{classImagesP_a43a0e66ed75a147c27474937f8c9112c}{M\-Detector}
\item 
std\-::vector$<$ Marker $>$ \hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}
\item 
Mat \hyperlink{classImagesP_add620ec27d299fe470cade4a6bc1e632}{marker\-Img}
\item 
Mat \hyperlink{classImagesP_adc6b2ffa6cbfab6c1b83ed4bef74f1b9}{marker\-Cpy}
\item 
Video\-Capture \hyperlink{classImagesP_a143a67baa23fdc4b1c28beda0bd964f5}{cap}
\end{DoxyCompactItemize}


\subsection{Documentation des constructeurs et destructeur}
\hypertarget{classImagesP_a18ff58308b1ba5787e1d05f0acd7224a}{\index{Images\-P@{Images\-P}!Images\-P@{Images\-P}}
\index{Images\-P@{Images\-P}!ImagesP@{Images\-P}}
\subsubsection[{Images\-P}]{\setlength{\rightskip}{0pt plus 5cm}Images\-P\-::\-Images\-P (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_a18ff58308b1ba5787e1d05f0acd7224a}


Références init().


\begin{DoxyCode}
5                 \{
6     \hyperlink{classImagesP_a0527e504ca88cece33edb90fef958c90}{init}();
7 \}
\end{DoxyCode}
\hypertarget{classImagesP_abd4ea58f9cb814dbb27feb5d2d793e53}{\index{Images\-P@{Images\-P}!$\sim$\-Images\-P@{$\sim$\-Images\-P}}
\index{$\sim$\-Images\-P@{$\sim$\-Images\-P}!ImagesP@{Images\-P}}
\subsubsection[{$\sim$\-Images\-P}]{\setlength{\rightskip}{0pt plus 5cm}Images\-P\-::$\sim$\-Images\-P (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_abd4ea58f9cb814dbb27feb5d2d793e53}


Références cap.


\begin{DoxyCode}
9                  \{
10     \hyperlink{classImagesP_a143a67baa23fdc4b1c28beda0bd964f5}{cap}.release();
11 \}
\end{DoxyCode}


\subsection{Documentation des fonctions membres}
\hypertarget{classImagesP_a799c4550d96659d7d188b03f52bb9f4a}{\index{Images\-P@{Images\-P}!calibration@{calibration}}
\index{calibration@{calibration}!ImagesP@{Images\-P}}
\subsubsection[{calibration}]{\setlength{\rightskip}{0pt plus 5cm}void Images\-P\-::calibration (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_a799c4550d96659d7d188b03f52bb9f4a}


Références cap, \-\_\-share\-M\-::index, M\-A\-R\-K\-E\-R\-\_\-\-I\-D\-\_\-\-A\-R\-E\-A, marker\-Img, Markers, M\-Detector, et save\-Calib().



Référencé par Core\-::calibration().


\begin{DoxyCode}
193                          \{
194     \hyperlink{classImagesP_aeb7483dee60e755fffcc9e6f9355fd43}{saveCalib}(\textcolor{stringliteral}{"-1\(\backslash\)n-1\(\backslash\)n"}); \textcolor{comment}{//reset last calib}
195     std::vector<Marker> Markers\_wait;
196     \textcolor{keywordtype}{int} \hyperlink{server_8cpp_a30792c4b007e8273d3832fe2d5e70987}{index}=0;
197     \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{
198         \textcolor{keywordflow}{if}(!\hyperlink{classImagesP_a143a67baa23fdc4b1c28beda0bd964f5}{cap}.read(\hyperlink{classImagesP_add620ec27d299fe470cade4a6bc1e632}{markerImg}))
199             \textcolor{keywordflow}{break};
200         \hyperlink{classImagesP_a43a0e66ed75a147c27474937f8c9112c}{MDetector}.detect(\hyperlink{classImagesP_add620ec27d299fe470cade4a6bc1e632}{markerImg},Markers\_wait);
201         \textcolor{keywordflow}{if}(Markers\_wait.size() > \hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}.size())\{
202             Point2f centerPt(0,0);
203             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<Markers\_wait.size();i++)\{
204                 \textcolor{keywordflow}{if}(Markers\_wait[i].\textcolor{keywordtype}{id} == \hyperlink{definition_8h_a6036f5d317ce1f843aae2fdd46d845c9}{MARKER\_ID\_AREA})\{
205                     centerPt = Markers\_wait[i].getCenter();
206                     std::string save(std::to\_string(centerPt.x) +\textcolor{stringliteral}{"\(\backslash\)n"}+ std::to\_string(centerPt.y));
207                     \hyperlink{classImagesP_aeb7483dee60e755fffcc9e6f9355fd43}{saveCalib}(save);
208                     \textcolor{keywordflow}{break};
209                 \}
210             \}
211             \hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers} = Markers\_wait;
212         \}\textcolor{keywordflow}{else}\{
213             index++;
214         \}
215         \textcolor{keywordflow}{if}(index==5)
216             \textcolor{keywordflow}{break};
217     \}
218 \}
\end{DoxyCode}
\hypertarget{classImagesP_a4eee68c40eb47b29e0b738ea38a55353}{\index{Images\-P@{Images\-P}!draw\-Matrix@{draw\-Matrix}}
\index{draw\-Matrix@{draw\-Matrix}!ImagesP@{Images\-P}}
\subsubsection[{draw\-Matrix}]{\setlength{\rightskip}{0pt plus 5cm}void Images\-P\-::draw\-Matrix (
\begin{DoxyParamCaption}
\item[{Mat \&}]{frame, }
\item[{Point}]{center}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_a4eee68c40eb47b29e0b738ea38a55353}


Référencé par markers\-Processing().


\begin{DoxyCode}
83                                                 \{
84     int16\_t RecX1 = center.x-240;
85     int16\_t RecX2 = center.x+240;
86     int16\_t RecY1 = center.y-240;
87     int16\_t RecY2 = center.y+240;
88     \textcolor{keywordflow}{for}(int16\_t j=1; j<25;j++)\{
89         RecX2 = RecX2 - 20;
90         rectangle(frame, Point(RecX1, RecY1), Point(RecX2, RecY2), cv::Scalar(0, 255, 0));
91     \}
92     RecX2 = center.x+240;
93     \textcolor{comment}{//horizontal}
94     \textcolor{keywordflow}{for}(int16\_t j=1; j<25;j++)\{
95         RecY2 = RecY2 - 20;
96         rectangle(frame, Point(RecX1, RecY1), Point(RecX2, RecY2), cv::Scalar(0, 255, 0));
97     \}
98 \}
\end{DoxyCode}
\hypertarget{classImagesP_aab5950c25ea44c06bc4026ce6dece7fa}{\index{Images\-P@{Images\-P}!fill\-Rotated\-Rect@{fill\-Rotated\-Rect}}
\index{fill\-Rotated\-Rect@{fill\-Rotated\-Rect}!ImagesP@{Images\-P}}
\subsubsection[{fill\-Rotated\-Rect}]{\setlength{\rightskip}{0pt plus 5cm}void Images\-P\-::fill\-Rotated\-Rect (
\begin{DoxyParamCaption}
\item[{Mat \&}]{frame, }
\item[{Point2f}]{center, }
\item[{Size2f}]{size, }
\item[{Scalar}]{color, }
\item[{float}]{angle}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_aab5950c25ea44c06bc4026ce6dece7fa}


Référencé par markers\-Processing().


\begin{DoxyCode}
100                                                                                                \{
101     RotatedRect rect(center, size, angle);
102     cv::Point2f vertices2f[4];
103     rect.points(vertices2f);
104     cv::Point vertices[4];
105     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < 4; ++i)\{
106         vertices[i] = vertices2f[i];
107     \}
108     cv::fillConvexPoly(frame,vertices, 4, color);
109 \}
\end{DoxyCode}
\hypertarget{classImagesP_a03b81fad0317e9939085c5e7538c2efe}{\index{Images\-P@{Images\-P}!get\-Angle@{get\-Angle}}
\index{get\-Angle@{get\-Angle}!ImagesP@{Images\-P}}
\subsubsection[{get\-Angle}]{\setlength{\rightskip}{0pt plus 5cm}float Images\-P\-::get\-Angle (
\begin{DoxyParamCaption}
\item[{Marker}]{marker}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_a03b81fad0317e9939085c5e7538c2efe}


Référencé par markers\-Processing(), et tracking\-Car().


\begin{DoxyCode}
22                                     \{
23     Point2f p\_a = marker[1];
24     Point2f p\_b = marker[2];
25 
26     Point2f p\_m(0,-1);
27     Point2f p\_i((p\_a.x+p\_b.x)/2, (p\_a.y+p\_b.y)/2);
28 
29     Point2f vec = marker.getCenter() - p\_i;
30 
31     \textcolor{keywordtype}{float} scal = vec.x*p\_m.x + vec.y*p\_m.y;
32     \textcolor{keywordtype}{float} deno = sqrt(pow(vec.x,2) + pow(vec.y,2)) * sqrt(pow(p\_m.x,2) + pow(p\_m.y,2));
33 
34     \textcolor{keywordtype}{float} r = acos(scal/deno);
35     \textcolor{keywordtype}{float} result = (r*180/M\_PI)-90;
36     \textcolor{keywordflow}{if}(p\_a.x > p\_b.x && p\_a.y >= p\_b.y)\{
37         result = 0 - result - 180;
38     \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(p\_a.x<p\_b.x && p\_a.y > p\_b.y)\{
39         result = 180 - result;
40     \}
41     \textcolor{comment}{/*Correction cause by pixel (angle sup 180 and inf to -180*/}
42     \textcolor{keywordflow}{if}(result > 180)\{
43         result = 0 - 180 + (sqrt(pow(result,2)) - 180);
44     \}
45     \textcolor{keywordflow}{if}(result < -180)\{
46         result = 180 - (sqrt(pow(result,2)) - 180);
47     \}
48     \textcolor{keywordflow}{return} result;
49 
50 \}
\end{DoxyCode}
\hypertarget{classImagesP_aaf0d33634f747f1defec833fbc6dfae2}{\index{Images\-P@{Images\-P}!get\-Arrival\-Position@{get\-Arrival\-Position}}
\index{get\-Arrival\-Position@{get\-Arrival\-Position}!ImagesP@{Images\-P}}
\subsubsection[{get\-Arrival\-Position}]{\setlength{\rightskip}{0pt plus 5cm}Point Images\-P\-::get\-Arrival\-Position (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_aaf0d33634f747f1defec833fbc6dfae2}


Références pos\-Arrival.



Référencé par Core\-::block\-Processing().


\begin{DoxyCode}
235                                  \{
236     \textcolor{keywordflow}{return} Point((\textcolor{keywordtype}{int})\hyperlink{classImagesP_a621b649c63d3967849103c03082af64c}{posArrival}.x, (\textcolor{keywordtype}{int})\hyperlink{classImagesP_a621b649c63d3967849103c03082af64c}{posArrival}.y);
237 \}
\end{DoxyCode}
\hypertarget{classImagesP_a9e709b963a13bc9dff823815e5e66200}{\index{Images\-P@{Images\-P}!get\-Block\-Matrice@{get\-Block\-Matrice}}
\index{get\-Block\-Matrice@{get\-Block\-Matrice}!ImagesP@{Images\-P}}
\subsubsection[{get\-Block\-Matrice}]{\setlength{\rightskip}{0pt plus 5cm}Point2f Images\-P\-::get\-Block\-Matrice (
\begin{DoxyParamCaption}
\item[{Point2f}]{center, }
\item[{int16\-\_\-t}]{x\-\_\-pixel, }
\item[{int16\-\_\-t}]{y\-\_\-pixel}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_a9e709b963a13bc9dff823815e5e66200}


Référencé par markers\-Processing().


\begin{DoxyCode}
71                                                                                 \{
72     int16\_t x\_ref = center.x - 240;
73     int16\_t y\_ref = center.y - 240;
74     int16\_t x\_sta = x\_pixel - x\_ref;
75     int16\_t y\_sta = y\_pixel - y\_ref;
76 
77     int16\_t x = (int)(x\_pixel/20)*20;
78     int16\_t y = (int)(y\_pixel/20)*20;
79     \textcolor{keywordflow}{return} Point2f(x+x\_ref, y+y\_ref);
80 
81 \}
\end{DoxyCode}
\hypertarget{classImagesP_afe9cff50f49fc67bd8938d8d0223fe81}{\index{Images\-P@{Images\-P}!get\-Car\-Position@{get\-Car\-Position}}
\index{get\-Car\-Position@{get\-Car\-Position}!ImagesP@{Images\-P}}
\subsubsection[{get\-Car\-Position}]{\setlength{\rightskip}{0pt plus 5cm}Point Images\-P\-::get\-Car\-Position (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_afe9cff50f49fc67bd8938d8d0223fe81}


Références pos\-Car.



Référencé par Core\-::block\-Processing().


\begin{DoxyCode}
230                              \{
231     \textcolor{keywordflow}{return} Point((\textcolor{keywordtype}{int})\hyperlink{classImagesP_a79d1d01bae703caeee1033425e4f8f18}{posCar}.x, (\textcolor{keywordtype}{int})\hyperlink{classImagesP_a79d1d01bae703caeee1033425e4f8f18}{posCar}.y);
232 \}
\end{DoxyCode}
\hypertarget{classImagesP_a002bb2f3148a85c46c954dcc98ad2760}{\index{Images\-P@{Images\-P}!get\-Size\-Marker@{get\-Size\-Marker}}
\index{get\-Size\-Marker@{get\-Size\-Marker}!ImagesP@{Images\-P}}
\subsubsection[{get\-Size\-Marker}]{\setlength{\rightskip}{0pt plus 5cm}uint8\-\_\-t Images\-P\-::get\-Size\-Marker (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_a002bb2f3148a85c46c954dcc98ad2760}


Références Markers.



Référencé par Core\-::block\-Processing().


\begin{DoxyCode}
14                               \{
15     \textcolor{keywordflow}{return} \hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}.size();
16 \}
\end{DoxyCode}
\hypertarget{classImagesP_a0b371e65a472c1cce7d6dc83bd171e4d}{\index{Images\-P@{Images\-P}!get\-X\-Y\-Matrix@{get\-X\-Y\-Matrix}}
\index{get\-X\-Y\-Matrix@{get\-X\-Y\-Matrix}!ImagesP@{Images\-P}}
\subsubsection[{get\-X\-Y\-Matrix}]{\setlength{\rightskip}{0pt plus 5cm}Point Images\-P\-::get\-X\-Y\-Matrix (
\begin{DoxyParamCaption}
\item[{int16\-\_\-t}]{x\-\_\-matrix, }
\item[{int16\-\_\-t}]{y\-\_\-matrix}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_a0b371e65a472c1cce7d6dc83bd171e4d}


Référencé par markers\-Processing().


\begin{DoxyCode}
18                                                             \{
19     \textcolor{keywordflow}{return} Point((\textcolor{keywordtype}{int})(x\_matrix/20), (\textcolor{keywordtype}{int})(y\_matrix/20));
20 \}
\end{DoxyCode}
\hypertarget{classImagesP_a0527e504ca88cece33edb90fef958c90}{\index{Images\-P@{Images\-P}!init@{init}}
\index{init@{init}!ImagesP@{Images\-P}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void Images\-P\-::init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_a0527e504ca88cece33edb90fef958c90}


Références cap, marker\-Cpy, marker\-Img, pos\-Arrival, et pos\-Car.



Référencé par Images\-P().


\begin{DoxyCode}
157                   \{
158     \hyperlink{classImagesP_a143a67baa23fdc4b1c28beda0bd964f5}{cap} = VideoCapture(0);
159     \hyperlink{classImagesP_adc6b2ffa6cbfab6c1b83ed4bef74f1b9}{markerCpy} = Mat(480,480, CV\_8UC3, Scalar(0));
160     \hyperlink{classImagesP_a143a67baa23fdc4b1c28beda0bd964f5}{cap} >> \hyperlink{classImagesP_add620ec27d299fe470cade4a6bc1e632}{markerImg};
161 
162     \hyperlink{classImagesP_a79d1d01bae703caeee1033425e4f8f18}{posCar} = Point2f(-1,-1);
163     \hyperlink{classImagesP_a621b649c63d3967849103c03082af64c}{posArrival} = Point2f(-1,-1);
164 \}
\end{DoxyCode}
\hypertarget{classImagesP_a4048e5f515cb51cbf25211ec8b4854b7}{\index{Images\-P@{Images\-P}!load\-Calib@{load\-Calib}}
\index{load\-Calib@{load\-Calib}!ImagesP@{Images\-P}}
\subsubsection[{load\-Calib}]{\setlength{\rightskip}{0pt plus 5cm}Point2f Images\-P\-::load\-Calib (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_a4048e5f515cb51cbf25211ec8b4854b7}


Référencé par Core\-::calibration(), et start\-Block().


\begin{DoxyCode}
172                           \{
173     Point2f centerPt(-1,-1);
174     std::string line;
175     ifstream file(\textcolor{stringliteral}{"ressources/calib\_file.txt"});
176     \textcolor{keywordflow}{if}(file.is\_open())\{
177         uint8\_t count = 0;
178         \textcolor{keywordflow}{while}(getline(file, line))\{
179             \textcolor{keywordflow}{if}(count == 0)\{
180                 centerPt.x = std::stod(line);
181                 count++;
182             \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(count == 1)\{
183                 centerPt.y = std::stod(line);
184             \}\textcolor{keywordflow}{else}\{
185                 \textcolor{keywordflow}{return} centerPt;
186             \}
187         \}
188         file.close();
189     \}
190     \textcolor{keywordflow}{return} centerPt;
191 \}
\end{DoxyCode}
\hypertarget{classImagesP_af8bad8cf7cb3be74c084a0efc86ca73f}{\index{Images\-P@{Images\-P}!markers\-Processing@{markers\-Processing}}
\index{markers\-Processing@{markers\-Processing}!ImagesP@{Images\-P}}
\subsubsection[{markers\-Processing}]{\setlength{\rightskip}{0pt plus 5cm}void Images\-P\-::markers\-Processing (
\begin{DoxyParamCaption}
\item[{Point2f}]{center\-Pt}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_af8bad8cf7cb3be74c084a0efc86ca73f}


Références all\-\_\-block, angle\-Arrival, angle\-Car, draw\-Matrix(), fill\-Rotated\-Rect(), get\-Angle(), get\-Block\-Matrice(), get\-X\-Y\-Matrix(), M\-A\-R\-G\-E\-\_\-\-B\-L\-O\-C\-K\-\_\-\-P\-R\-O\-C\-E\-S\-S\-I\-N\-G, M\-A\-R\-K\-E\-R\-\_\-\-I\-D\-\_\-\-A\-R\-E\-A, M\-A\-R\-K\-E\-R\-\_\-\-I\-D\-\_\-\-A\-R\-R\-I\-V\-A\-L, M\-A\-R\-K\-E\-R\-\_\-\-I\-D\-\_\-\-C\-A\-R, marker\-Cpy, Markers, pos\-Arrival, pos\-Car, et willbe\-Block().



Référencé par start\-Block().


\begin{DoxyCode}
111                                                \{
112     \textcolor{keywordflow}{for} (int16\_t i=0;i<\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}.size();i++) \{
113         int16\_t x = (int16\_t)\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].getCenter().x;
114         int16\_t y = (int16\_t)\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].getCenter().y;
115         Point2f new\_center = \hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].getCenter() - centerPt;
116         new\_center += Point2f(240,240);
117         \textcolor{keywordflow}{if}(\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].\textcolor{keywordtype}{id} == \hyperlink{definition_8h_a6036f5d317ce1f843aae2fdd46d845c9}{MARKER\_ID\_AREA})\{
118             \hyperlink{classImagesP_a4eee68c40eb47b29e0b738ea38a55353}{drawMatrix}(\hyperlink{classImagesP_adc6b2ffa6cbfab6c1b83ed4bef74f1b9}{markerCpy}, Point(240,240));
119         \}\textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].\textcolor{keywordtype}{id} != \hyperlink{definition_8h_aa0e4cfe3919e1b2633bd67fbbae28ec5}{MARKER\_ID\_CAR} && \hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].\textcolor{keywordtype}{id} != 
      \hyperlink{definition_8h_a6b35f14504af015e91cc6963cb51d6f5}{MARKER\_ID\_ARRIVAL})\{ \textcolor{comment}{/*bloc*/}
120             std::vector<Point> point\_marker;
121             \hyperlink{classImagesP_aab5950c25ea44c06bc4026ce6dece7fa}{fillRotatedRect}(
122                 \hyperlink{classImagesP_adc6b2ffa6cbfab6c1b83ed4bef74f1b9}{markerCpy}, new\_center, Size2f(60, 60), Scalar(255,255,255), 
      \hyperlink{classImagesP_a03b81fad0317e9939085c5e7538c2efe}{getAngle}(\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i])
123             );
124             Point2f pts = \hyperlink{classImagesP_a9e709b963a13bc9dff823815e5e66200}{getBlockMatrice}(
125                 Point2f(240,240), 
126                 new\_center.x - (\hyperlink{definition_8h_a7ff61b468299d760aa0a3187ab24dddc}{MARGE\_BLOCK\_PROCESSING}*sqrt(2)), 
127                 new\_center.y - (\hyperlink{definition_8h_a7ff61b468299d760aa0a3187ab24dddc}{MARGE\_BLOCK\_PROCESSING}*sqrt(2))
128             );
129             int16\_t p\_x = pts.x;
130             int16\_t p\_y = pts.y;
131             \textcolor{keywordflow}{for}(int16\_t ii=0; ii<6; ++ii)\{
132                 \textcolor{keywordflow}{for}(int16\_t jj=0; jj<6;++jj)\{
133                     \textcolor{keywordtype}{bool} bloc = \hyperlink{classImagesP_a4e8b4ba0f6f6f408de4cc4c52ac29f27}{willbeBlock}(\hyperlink{classImagesP_adc6b2ffa6cbfab6c1b83ed4bef74f1b9}{markerCpy}, Point(p\_x+1,p\_y+1), 16);
134                     \textcolor{keywordflow}{if}(bloc)\{
135                         point\_marker.push\_back(\hyperlink{classImagesP_a0b371e65a472c1cce7d6dc83bd171e4d}{getXYMatrix}(p\_y, p\_x)); \textcolor{comment}{//inverser}
136                         rectangle(\hyperlink{classImagesP_adc6b2ffa6cbfab6c1b83ed4bef74f1b9}{markerCpy}, Point2f(p\_x+2,p\_y+2), Point2f(p\_x+18,p\_y+18), Scalar(
      0, 0, 255));
137                     \}
138                     p\_y +=20;
139                 \}
140                 p\_y = pts.y;
141                 p\_x +=20;
142             \}
143             \hyperlink{classImagesP_ab9e279526694a7ce421cfa11b9309ed1}{all\_block}.insert(\hyperlink{classImagesP_ab9e279526694a7ce421cfa11b9309ed1}{all\_block}.end(), point\_marker.begin(), point\_marker.end());
144         \}
145         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].\textcolor{keywordtype}{id} == \hyperlink{definition_8h_aa0e4cfe3919e1b2633bd67fbbae28ec5}{MARKER\_ID\_CAR})\{
146             \hyperlink{classImagesP_a39c69bdd9469b4b8a2c9666e27afa7b0}{angleCar} = \hyperlink{classImagesP_a03b81fad0317e9939085c5e7538c2efe}{getAngle}(\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i]);
147             \hyperlink{classImagesP_a79d1d01bae703caeee1033425e4f8f18}{posCar} = \hyperlink{classImagesP_a0b371e65a472c1cce7d6dc83bd171e4d}{getXYMatrix}(new\_center.y,new\_center.x); \textcolor{comment}{//x and y are inversed with
       axis openCV}
148         \}
149         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].\textcolor{keywordtype}{id} == \hyperlink{definition_8h_a6b35f14504af015e91cc6963cb51d6f5}{MARKER\_ID\_ARRIVAL})\{
150             \hyperlink{classImagesP_a408c61aeceb9175481adb2daca707a48}{angleArrival} = \hyperlink{classImagesP_a03b81fad0317e9939085c5e7538c2efe}{getAngle}(\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i]);
151             \hyperlink{classImagesP_a621b649c63d3967849103c03082af64c}{posArrival} = \hyperlink{classImagesP_a0b371e65a472c1cce7d6dc83bd171e4d}{getXYMatrix}(new\_center.y,new\_center.x); \textcolor{comment}{//x and y are
       inversed with axis openCV}
152             
153         \}
154     \}
155 \}
\end{DoxyCode}
\hypertarget{classImagesP_aeb7483dee60e755fffcc9e6f9355fd43}{\index{Images\-P@{Images\-P}!save\-Calib@{save\-Calib}}
\index{save\-Calib@{save\-Calib}!ImagesP@{Images\-P}}
\subsubsection[{save\-Calib}]{\setlength{\rightskip}{0pt plus 5cm}void Images\-P\-::save\-Calib (
\begin{DoxyParamCaption}
\item[{std\-::string}]{str}
\end{DoxyParamCaption}
)}}\label{classImagesP_aeb7483dee60e755fffcc9e6f9355fd43}


Référencé par calibration().


\begin{DoxyCode}
166                                     \{
167     ofstream file(\textcolor{stringliteral}{"ressources/calib\_file.txt"});
168     file << str.c\_str();
169     file.close();
170 \}
\end{DoxyCode}
\hypertarget{classImagesP_ae2aecf8db20e7b3bcd14a7182dfdaf29}{\index{Images\-P@{Images\-P}!start\-Block@{start\-Block}}
\index{start\-Block@{start\-Block}!ImagesP@{Images\-P}}
\subsubsection[{start\-Block}]{\setlength{\rightskip}{0pt plus 5cm}void Images\-P\-::start\-Block (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_ae2aecf8db20e7b3bcd14a7182dfdaf29}


Références all\-\_\-block, load\-Calib(), et markers\-Processing().



Référencé par Core\-::block\-Processing().


\begin{DoxyCode}
220                         \{
221     \hyperlink{classImagesP_ab9e279526694a7ce421cfa11b9309ed1}{all\_block} = std::vector<Point>(0);
222     Point2f centerPt = \hyperlink{classImagesP_a4048e5f515cb51cbf25211ec8b4854b7}{loadCalib}();
223     \textcolor{keywordflow}{if}(centerPt.x > 0)\{
224         \hyperlink{classImagesP_af8bad8cf7cb3be74c084a0efc86ca73f}{markersProcessing}(centerPt);
225     \}\textcolor{keywordflow}{else}\{
226         std::cout<<\textcolor{stringliteral}{"ERROR CALIB LOAD"}<<std::endl;
227     \}
228 \}
\end{DoxyCode}
\hypertarget{classImagesP_adf17333e9b35092e96fef60bbbf80d74}{\index{Images\-P@{Images\-P}!tracking\-Car@{tracking\-Car}}
\index{tracking\-Car@{tracking\-Car}!ImagesP@{Images\-P}}
\subsubsection[{tracking\-Car}]{\setlength{\rightskip}{0pt plus 5cm}void Images\-P\-::tracking\-Car (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classImagesP_adf17333e9b35092e96fef60bbbf80d74}


Références angle\-Car, get\-Angle(), M\-A\-R\-K\-E\-R\-\_\-\-I\-D\-\_\-\-C\-A\-R, Markers, et pos\-Car.


\begin{DoxyCode}
239                          \{
240     \textcolor{comment}{//check posCar and angleCar after use this function !}
241     \hyperlink{classImagesP_a79d1d01bae703caeee1033425e4f8f18}{posCar} = Point(-1,-1);
242     \hyperlink{classImagesP_a39c69bdd9469b4b8a2c9666e27afa7b0}{angleCar} = 0;
243     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i<\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}.size();i++)\{
244         \textcolor{keywordflow}{if}(\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].\textcolor{keywordtype}{id} == \hyperlink{definition_8h_aa0e4cfe3919e1b2633bd67fbbae28ec5}{MARKER\_ID\_CAR})\{
245             \hyperlink{classImagesP_a79d1d01bae703caeee1033425e4f8f18}{posCar} = \hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i].getCenter();
246             \hyperlink{classImagesP_a39c69bdd9469b4b8a2c9666e27afa7b0}{angleCar} = \hyperlink{classImagesP_a03b81fad0317e9939085c5e7538c2efe}{getAngle}(\hyperlink{classImagesP_ac2813bc8a3edac420df686902806172c}{Markers}[i]);
247             \textcolor{keywordflow}{return};
248         \}
249     \}
250 \}\end{DoxyCode}
\hypertarget{classImagesP_a4e8b4ba0f6f6f408de4cc4c52ac29f27}{\index{Images\-P@{Images\-P}!willbe\-Block@{willbe\-Block}}
\index{willbe\-Block@{willbe\-Block}!ImagesP@{Images\-P}}
\subsubsection[{willbe\-Block}]{\setlength{\rightskip}{0pt plus 5cm}bool Images\-P\-::willbe\-Block (
\begin{DoxyParamCaption}
\item[{Mat \&}]{frame, }
\item[{Point}]{left\-Top, }
\item[{int8\-\_\-t}]{pixel\-Max}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_a4e8b4ba0f6f6f408de4cc4c52ac29f27}


Référencé par markers\-Processing().


\begin{DoxyCode}
52                                                                    \{
53     int16\_t counter = 0;
54     \textcolor{keywordflow}{for}(int16\_t x=leftTop.x; x<leftTop.x+18;++x)\{
55        \textcolor{keywordflow}{for}(int16\_t y=leftTop.y; y<leftTop.y+18;++y)\{
56            Vec3b intensity = frame.at<Vec3b>(y, x);
57             uchar blue = intensity.val[0];
58             uchar green = intensity.val[1];
59             uchar red = intensity.val[2];
60             \textcolor{keywordflow}{if}(blue == 255 && green == 255 && red == 255)\{
61                 counter++;
62             \}
63         \}
64     \}
65     \textcolor{keywordflow}{if}(counter >= pixelMax)\{
66         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
67     \}
68     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
69 \}
\end{DoxyCode}


\subsection{Documentation des données membres}
\hypertarget{classImagesP_ab9e279526694a7ce421cfa11b9309ed1}{\index{Images\-P@{Images\-P}!all\-\_\-block@{all\-\_\-block}}
\index{all\-\_\-block@{all\-\_\-block}!ImagesP@{Images\-P}}
\subsubsection[{all\-\_\-block}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$Point$>$ Images\-P\-::all\-\_\-block}}\label{classImagesP_ab9e279526694a7ce421cfa11b9309ed1}


Référencé par Core\-::block\-Processing(), markers\-Processing(), et start\-Block().

\hypertarget{classImagesP_a408c61aeceb9175481adb2daca707a48}{\index{Images\-P@{Images\-P}!angle\-Arrival@{angle\-Arrival}}
\index{angle\-Arrival@{angle\-Arrival}!ImagesP@{Images\-P}}
\subsubsection[{angle\-Arrival}]{\setlength{\rightskip}{0pt plus 5cm}float Images\-P\-::angle\-Arrival}}\label{classImagesP_a408c61aeceb9175481adb2daca707a48}


Référencé par markers\-Processing().

\hypertarget{classImagesP_a39c69bdd9469b4b8a2c9666e27afa7b0}{\index{Images\-P@{Images\-P}!angle\-Car@{angle\-Car}}
\index{angle\-Car@{angle\-Car}!ImagesP@{Images\-P}}
\subsubsection[{angle\-Car}]{\setlength{\rightskip}{0pt plus 5cm}float Images\-P\-::angle\-Car}}\label{classImagesP_a39c69bdd9469b4b8a2c9666e27afa7b0}


Référencé par markers\-Processing(), et tracking\-Car().

\hypertarget{classImagesP_a143a67baa23fdc4b1c28beda0bd964f5}{\index{Images\-P@{Images\-P}!cap@{cap}}
\index{cap@{cap}!ImagesP@{Images\-P}}
\subsubsection[{cap}]{\setlength{\rightskip}{0pt plus 5cm}Video\-Capture Images\-P\-::cap\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_a143a67baa23fdc4b1c28beda0bd964f5}


Référencé par calibration(), init(), et $\sim$\-Images\-P().

\hypertarget{classImagesP_adc6b2ffa6cbfab6c1b83ed4bef74f1b9}{\index{Images\-P@{Images\-P}!marker\-Cpy@{marker\-Cpy}}
\index{marker\-Cpy@{marker\-Cpy}!ImagesP@{Images\-P}}
\subsubsection[{marker\-Cpy}]{\setlength{\rightskip}{0pt plus 5cm}Mat Images\-P\-::marker\-Cpy\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_adc6b2ffa6cbfab6c1b83ed4bef74f1b9}


Référencé par init(), et markers\-Processing().

\hypertarget{classImagesP_add620ec27d299fe470cade4a6bc1e632}{\index{Images\-P@{Images\-P}!marker\-Img@{marker\-Img}}
\index{marker\-Img@{marker\-Img}!ImagesP@{Images\-P}}
\subsubsection[{marker\-Img}]{\setlength{\rightskip}{0pt plus 5cm}Mat Images\-P\-::marker\-Img\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_add620ec27d299fe470cade4a6bc1e632}


Référencé par calibration(), et init().

\hypertarget{classImagesP_ac2813bc8a3edac420df686902806172c}{\index{Images\-P@{Images\-P}!Markers@{Markers}}
\index{Markers@{Markers}!ImagesP@{Images\-P}}
\subsubsection[{Markers}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$Marker$>$ Images\-P\-::\-Markers\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_ac2813bc8a3edac420df686902806172c}


Référencé par calibration(), get\-Size\-Marker(), markers\-Processing(), et tracking\-Car().

\hypertarget{classImagesP_a43a0e66ed75a147c27474937f8c9112c}{\index{Images\-P@{Images\-P}!M\-Detector@{M\-Detector}}
\index{M\-Detector@{M\-Detector}!ImagesP@{Images\-P}}
\subsubsection[{M\-Detector}]{\setlength{\rightskip}{0pt plus 5cm}Marker\-Detector Images\-P\-::\-M\-Detector\hspace{0.3cm}{\ttfamily [private]}}}\label{classImagesP_a43a0e66ed75a147c27474937f8c9112c}


Référencé par calibration().

\hypertarget{classImagesP_a621b649c63d3967849103c03082af64c}{\index{Images\-P@{Images\-P}!pos\-Arrival@{pos\-Arrival}}
\index{pos\-Arrival@{pos\-Arrival}!ImagesP@{Images\-P}}
\subsubsection[{pos\-Arrival}]{\setlength{\rightskip}{0pt plus 5cm}Point Images\-P\-::pos\-Arrival}}\label{classImagesP_a621b649c63d3967849103c03082af64c}


Référencé par get\-Arrival\-Position(), init(), et markers\-Processing().

\hypertarget{classImagesP_a79d1d01bae703caeee1033425e4f8f18}{\index{Images\-P@{Images\-P}!pos\-Car@{pos\-Car}}
\index{pos\-Car@{pos\-Car}!ImagesP@{Images\-P}}
\subsubsection[{pos\-Car}]{\setlength{\rightskip}{0pt plus 5cm}Point Images\-P\-::pos\-Car}}\label{classImagesP_a79d1d01bae703caeee1033425e4f8f18}


Référencé par get\-Car\-Position(), init(), markers\-Processing(), et tracking\-Car().



La documentation de cette classe a été générée à partir des fichiers suivants \-:\begin{DoxyCompactItemize}
\item 
headers/traitement/\hyperlink{images_8h}{images.\-h}\item 
sources/traitement/\hyperlink{images_8cpp}{images.\-cpp}\end{DoxyCompactItemize}
