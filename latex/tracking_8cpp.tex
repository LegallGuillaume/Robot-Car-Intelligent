\hypertarget{tracking_8cpp}{\section{Référence du fichier sources/traitement/tracking.cpp}
\label{tracking_8cpp}\index{sources/traitement/tracking.\-cpp@{sources/traitement/tracking.\-cpp}}
}
{\ttfamily \#include $<$sstream$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$vector$>$}\\*
{\ttfamily \#include \char`\"{}opencv2/highgui/highgui.\-hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}opencv2/imgproc/imgproc.\-hpp\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{tracking_8cpp_structblocs}{blocs}
\end{DoxyCompactItemize}
\subsection*{Fonctions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{tracking_8cpp_a565d1d7ba32cdc9675c748dc6914e3bf}{morph} (Mat \&thresh)
\item 
void \hyperlink{tracking_8cpp_a1c1377796bd8d5b7853d64100cc5a599}{track\-Filtered\-Object} (Mat threshold, Mat H\-S\-V, Mat \&camera\-Feed)
\item 
int \hyperlink{tracking_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{tracking_8cpp_a718f9edf6244e85b1195f2d6c0b6fdb5}{H\-\_\-\-M\-I\-N} = 0
\item 
int \hyperlink{tracking_8cpp_ab78f6f6eb9e0a7b7363de7205469e265}{H\-\_\-\-M\-A\-X} = 6
\item 
int \hyperlink{tracking_8cpp_a80970133e7290ddaa15b6d949fc99420}{S\-\_\-\-M\-I\-N} = 121
\item 
int \hyperlink{tracking_8cpp_a04632c156a04ad172a367f2760582928}{S\-\_\-\-M\-A\-X} = 255
\item 
int \hyperlink{tracking_8cpp_a6238c0ecdac57d88d1f30259c60238cc}{V\-\_\-\-M\-I\-N} = 100
\item 
int \hyperlink{tracking_8cpp_ae2de9b8731e1c54a74579610837e59c0}{V\-\_\-\-M\-A\-X} = 255
\item 
const int \hyperlink{tracking_8cpp_ac96a9c046b50ebf22c37b3cf79c02ddb}{F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H} = 640
\item 
const int \hyperlink{tracking_8cpp_a51f854cccc79cb38663ab9df81542fa8}{F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T} = 480
\item 
const int \hyperlink{tracking_8cpp_a8a50b2cd532c0c4f222c1df6df253ef2}{M\-A\-X\-\_\-\-N\-U\-M\-\_\-\-O\-B\-J\-E\-C\-T\-S} =50
\item 
const int \hyperlink{tracking_8cpp_afa37064ddc74dd317a926ffc4237a044}{M\-I\-N\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A} = 40$\ast$40
\item 
const int \hyperlink{tracking_8cpp_a7db639fb76f89379628fd5288f238230}{M\-A\-X\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A} = \hyperlink{tracking_8cpp_a51f854cccc79cb38663ab9df81542fa8}{F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T}$\ast$\hyperlink{tracking_8cpp_ac96a9c046b50ebf22c37b3cf79c02ddb}{F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H}/1.\-5
\end{DoxyCompactItemize}


\subsection{Documentation des classes}
\index{blocs@{blocs}}\label{structblocs}
\hypertarget{tracking_8cpp_structblocs}{}
\subsubsection{struct blocs}
\begin{DoxyFields}{Membres de classe}
\hypertarget{tracking_8cpp_ab5e2639110ab5ff7f10df93ca5e33db8}{int}\label{tracking_8cpp_ab5e2639110ab5ff7f10df93ca5e33db8}
&
x&
\\
\hline

\hypertarget{tracking_8cpp_a81fbf9bc71ec55c3ef555628fcb4057b}{int}\label{tracking_8cpp_a81fbf9bc71ec55c3ef555628fcb4057b}
&
y&
\\
\hline

\end{DoxyFields}


\subsection{Documentation des fonctions}
\hypertarget{tracking_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{\index{tracking.\-cpp@{tracking.\-cpp}!main@{main}}
\index{main@{main}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{tracking_8cpp_a0ddf1224851353fc92bfbff6f499fa97}


Références F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T, F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H, H\-\_\-\-M\-A\-X, H\-\_\-\-M\-I\-N, morph(), S\-\_\-\-M\-A\-X, S\-\_\-\-M\-I\-N, track\-Filtered\-Object(), V\-\_\-\-M\-A\-X, et V\-\_\-\-M\-I\-N.


\begin{DoxyCode}
118 \{
119     \textcolor{comment}{//if we would like to calibrate our filter values, set to true.}
120     \textcolor{keywordtype}{bool} calibrationMode = \textcolor{keyword}{true};
121     
122     \textcolor{comment}{//Matrix to store each frame of the webcam feed}
123     Mat cameraFeed;
124     Mat threshold;
125     Mat HSV;
126     \textcolor{comment}{//video capture object to acquire webcam feed}
127     VideoCapture capture;
128     \textcolor{comment}{//open capture object at location zero (default location for webcam)}
129     capture.open(0);
130     \textcolor{comment}{//set height and width of capture frame}
131     capture.set(CV\_CAP\_PROP\_FRAME\_WIDTH,\hyperlink{tracking_8cpp_ac96a9c046b50ebf22c37b3cf79c02ddb}{FRAME\_WIDTH});
132     capture.set(CV\_CAP\_PROP\_FRAME\_HEIGHT,\hyperlink{tracking_8cpp_a51f854cccc79cb38663ab9df81542fa8}{FRAME\_HEIGHT});
133     \textcolor{comment}{//start an infinite loop where webcam feed is copied to cameraFeed matrix}
134     \textcolor{comment}{//all of our operations will be performed within this loop}
135     \textcolor{keywordflow}{while}(1)\{
136         \textcolor{comment}{//store image to matrix}
137         capture.read(cameraFeed);
138         \textcolor{comment}{//convert frame from BGR to HSV colorspace}
139         cvtColor(cameraFeed,HSV,COLOR\_BGR2HSV);
140 
141         \textcolor{keywordflow}{if}(calibrationMode==\textcolor{keyword}{true})\{
142         \textcolor{comment}{//if in calibration mode, we track objects based on the HSV slider values.}
143         cvtColor(cameraFeed,HSV,COLOR\_BGR2HSV);
144         inRange(HSV,Scalar(\hyperlink{tracking_8cpp_a718f9edf6244e85b1195f2d6c0b6fdb5}{H\_MIN},\hyperlink{tracking_8cpp_a80970133e7290ddaa15b6d949fc99420}{S\_MIN},\hyperlink{tracking_8cpp_a6238c0ecdac57d88d1f30259c60238cc}{V\_MIN}),Scalar(\hyperlink{tracking_8cpp_ab78f6f6eb9e0a7b7363de7205469e265}{H\_MAX},
      \hyperlink{tracking_8cpp_a04632c156a04ad172a367f2760582928}{S\_MAX},\hyperlink{tracking_8cpp_ae2de9b8731e1c54a74579610837e59c0}{V\_MAX}),threshold);
145         \hyperlink{tracking_8cpp_a565d1d7ba32cdc9675c748dc6914e3bf}{morph}(threshold);
146         imshow(windowName2,threshold);
147         \hyperlink{tracking_8cpp_a1c1377796bd8d5b7853d64100cc5a599}{trackFilteredObject}(threshold,HSV,cameraFeed);
148         \}
149 
150         \textcolor{comment}{//show frames }
151         \textcolor{comment}{//imshow(windowName2,threshold);}
152 
153         imshow(windowName,cameraFeed);
154         \textcolor{comment}{//imshow(windowName1,HSV);}
155 
156 
157         \textcolor{comment}{//delay 30ms so that screen can refresh.}
158         \textcolor{comment}{//image will not appear without this waitKey() command}
159         waitKey(30);
160     \}
161     \textcolor{keywordflow}{return} 0;
162 \}
\end{DoxyCode}
\hypertarget{tracking_8cpp_a565d1d7ba32cdc9675c748dc6914e3bf}{\index{tracking.\-cpp@{tracking.\-cpp}!morph@{morph}}
\index{morph@{morph}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{morph}]{\setlength{\rightskip}{0pt plus 5cm}void morph (
\begin{DoxyParamCaption}
\item[{Mat \&}]{thresh}
\end{DoxyParamCaption}
)}}\label{tracking_8cpp_a565d1d7ba32cdc9675c748dc6914e3bf}


Référencé par main().


\begin{DoxyCode}
46                        \{
47 
48     \textcolor{comment}{//create structuring element that will be used to "dilate" and "erode" image.}
49     \textcolor{comment}{//the element chosen here is a 3px by 3px rectangle}
50 
51     Mat erodeElement = getStructuringElement( MORPH\_RECT,Size(3,3));
52     \textcolor{comment}{//dilate with larger element so make sure object is nicely visible}
53     Mat dilateElement = getStructuringElement( MORPH\_RECT,Size(8,8));
54 
55     erode(thresh,thresh,erodeElement);
56     erode(thresh,thresh,erodeElement);
57 
58 
59     dilate(thresh,thresh,dilateElement);
60     dilate(thresh,thresh,dilateElement);
61 
62 
63 
64 \}
\end{DoxyCode}
\hypertarget{tracking_8cpp_a1c1377796bd8d5b7853d64100cc5a599}{\index{tracking.\-cpp@{tracking.\-cpp}!track\-Filtered\-Object@{track\-Filtered\-Object}}
\index{track\-Filtered\-Object@{track\-Filtered\-Object}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{track\-Filtered\-Object}]{\setlength{\rightskip}{0pt plus 5cm}void track\-Filtered\-Object (
\begin{DoxyParamCaption}
\item[{Mat}]{threshold, }
\item[{Mat}]{H\-S\-V, }
\item[{Mat \&}]{camera\-Feed}
\end{DoxyParamCaption}
)}}\label{tracking_8cpp_a1c1377796bd8d5b7853d64100cc5a599}


Références M\-A\-X\-\_\-\-N\-U\-M\-\_\-\-O\-B\-J\-E\-C\-T\-S, M\-I\-N\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A, blocs\-::x, et blocs\-::y.



Référencé par main().


\begin{DoxyCode}
65                                                                 \{
66 
67     
68     vector <struct blocs> \hyperlink{tracking_8cpp_structblocs}{blocs};
69 
70     Mat temp;
71     threshold.copyTo(temp);
72     \textcolor{comment}{//these two vectors needed for output of findContours}
73     vector< vector<Point> > contours;
74     vector<Vec4i> hierarchy;
75     \textcolor{comment}{//find contours of filtered image using openCV findContours function}
76     findContours(temp,contours,hierarchy,CV\_RETR\_CCOMP,CV\_CHAIN\_APPROX\_SIMPLE );
77     \textcolor{comment}{//use moments method to find our filtered object}
78     \textcolor{keywordtype}{double} refArea = 0;
79     \textcolor{keywordtype}{bool} objectFound = \textcolor{keyword}{false};
80     \textcolor{keywordflow}{if} (hierarchy.size() > 0) \{
81         \textcolor{keywordtype}{int} numObjects = hierarchy.size();
82         \textcolor{comment}{//if number of objects greater than MAX\_NUM\_OBJECTS we have a noisy filter}
83         \textcolor{keywordflow}{if}(numObjects<\hyperlink{tracking_8cpp_a8a50b2cd532c0c4f222c1df6df253ef2}{MAX\_NUM\_OBJECTS})\{
84             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} index = 0; index >= 0; index = hierarchy[index][0]) \{
85 
86                 Moments moment = moments((cv::Mat)contours[index]);
87                 \textcolor{keywordtype}{double} area = moment.m00;
88 
89                 \textcolor{comment}{//if the area is less than 20 px by 20px then it is probably just noise}
90                 \textcolor{comment}{//if the area is the same as the 3/2 of the image size, probably just a bad filter}
91                 \textcolor{comment}{//we only want the object with the largest area so we safe a reference area each}
92                 \textcolor{comment}{//iteration and compare it to the area in the next iteration.}
93                 \textcolor{keywordflow}{if}(area>\hyperlink{tracking_8cpp_afa37064ddc74dd317a926ffc4237a044}{MIN\_OBJECT\_AREA})\{
94 
95                     \textcolor{keyword}{struct }blocs bloc;
96                     
97                     bloc.x = moment.m10/area;
98                     bloc.y = moment.m01/area;
99 
100                     blocs.push\_back(bloc);
101 
102                     objectFound = \textcolor{keyword}{true};
103 
104                 \}\textcolor{keywordflow}{else} objectFound = \textcolor{keyword}{false};
105 
106 
107             \}
108             \textcolor{comment}{//let user know you found an object}
109             \textcolor{keywordflow}{if}(objectFound ==\textcolor{keyword}{true})\{
110                 \textcolor{comment}{//draw object location on screen}
111                 drawObject(blocs,cameraFeed);\}
112 
113         \}\textcolor{keywordflow}{else} putText(cameraFeed,\textcolor{stringliteral}{"TOO MUCH NOISE! ADJUST FILTER"},Point(0,50),1,2,Scalar(0,0,255),2);
114     \}
115 \}
\end{DoxyCode}


\subsection{Documentation des variables}
\hypertarget{tracking_8cpp_a51f854cccc79cb38663ab9df81542fa8}{\index{tracking.\-cpp@{tracking.\-cpp}!F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T@{F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T}}
\index{F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T@{F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T}]{\setlength{\rightskip}{0pt plus 5cm}const int F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T = 480}}\label{tracking_8cpp_a51f854cccc79cb38663ab9df81542fa8}


Référencé par main().

\hypertarget{tracking_8cpp_ac96a9c046b50ebf22c37b3cf79c02ddb}{\index{tracking.\-cpp@{tracking.\-cpp}!F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H@{F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H}}
\index{F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H@{F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}const int F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H = 640}}\label{tracking_8cpp_ac96a9c046b50ebf22c37b3cf79c02ddb}


Référencé par main().

\hypertarget{tracking_8cpp_ab78f6f6eb9e0a7b7363de7205469e265}{\index{tracking.\-cpp@{tracking.\-cpp}!H\-\_\-\-M\-A\-X@{H\-\_\-\-M\-A\-X}}
\index{H\-\_\-\-M\-A\-X@{H\-\_\-\-M\-A\-X}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{H\-\_\-\-M\-A\-X}]{\setlength{\rightskip}{0pt plus 5cm}int H\-\_\-\-M\-A\-X = 6}}\label{tracking_8cpp_ab78f6f6eb9e0a7b7363de7205469e265}


Référencé par main().

\hypertarget{tracking_8cpp_a718f9edf6244e85b1195f2d6c0b6fdb5}{\index{tracking.\-cpp@{tracking.\-cpp}!H\-\_\-\-M\-I\-N@{H\-\_\-\-M\-I\-N}}
\index{H\-\_\-\-M\-I\-N@{H\-\_\-\-M\-I\-N}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{H\-\_\-\-M\-I\-N}]{\setlength{\rightskip}{0pt plus 5cm}int H\-\_\-\-M\-I\-N = 0}}\label{tracking_8cpp_a718f9edf6244e85b1195f2d6c0b6fdb5}


Référencé par main().

\hypertarget{tracking_8cpp_a8a50b2cd532c0c4f222c1df6df253ef2}{\index{tracking.\-cpp@{tracking.\-cpp}!M\-A\-X\-\_\-\-N\-U\-M\-\_\-\-O\-B\-J\-E\-C\-T\-S@{M\-A\-X\-\_\-\-N\-U\-M\-\_\-\-O\-B\-J\-E\-C\-T\-S}}
\index{M\-A\-X\-\_\-\-N\-U\-M\-\_\-\-O\-B\-J\-E\-C\-T\-S@{M\-A\-X\-\_\-\-N\-U\-M\-\_\-\-O\-B\-J\-E\-C\-T\-S}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{M\-A\-X\-\_\-\-N\-U\-M\-\_\-\-O\-B\-J\-E\-C\-T\-S}]{\setlength{\rightskip}{0pt plus 5cm}const int M\-A\-X\-\_\-\-N\-U\-M\-\_\-\-O\-B\-J\-E\-C\-T\-S =50}}\label{tracking_8cpp_a8a50b2cd532c0c4f222c1df6df253ef2}


Référencé par track\-Filtered\-Object().

\hypertarget{tracking_8cpp_a7db639fb76f89379628fd5288f238230}{\index{tracking.\-cpp@{tracking.\-cpp}!M\-A\-X\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A@{M\-A\-X\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A}}
\index{M\-A\-X\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A@{M\-A\-X\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{M\-A\-X\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A}]{\setlength{\rightskip}{0pt plus 5cm}const int M\-A\-X\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A = {\bf F\-R\-A\-M\-E\-\_\-\-H\-E\-I\-G\-H\-T}$\ast${\bf F\-R\-A\-M\-E\-\_\-\-W\-I\-D\-T\-H}/1.\-5}}\label{tracking_8cpp_a7db639fb76f89379628fd5288f238230}
\hypertarget{tracking_8cpp_afa37064ddc74dd317a926ffc4237a044}{\index{tracking.\-cpp@{tracking.\-cpp}!M\-I\-N\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A@{M\-I\-N\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A}}
\index{M\-I\-N\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A@{M\-I\-N\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{M\-I\-N\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A}]{\setlength{\rightskip}{0pt plus 5cm}const int M\-I\-N\-\_\-\-O\-B\-J\-E\-C\-T\-\_\-\-A\-R\-E\-A = 40$\ast$40}}\label{tracking_8cpp_afa37064ddc74dd317a926ffc4237a044}


Référencé par track\-Filtered\-Object().

\hypertarget{tracking_8cpp_a04632c156a04ad172a367f2760582928}{\index{tracking.\-cpp@{tracking.\-cpp}!S\-\_\-\-M\-A\-X@{S\-\_\-\-M\-A\-X}}
\index{S\-\_\-\-M\-A\-X@{S\-\_\-\-M\-A\-X}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{S\-\_\-\-M\-A\-X}]{\setlength{\rightskip}{0pt plus 5cm}int S\-\_\-\-M\-A\-X = 255}}\label{tracking_8cpp_a04632c156a04ad172a367f2760582928}


Référencé par main().

\hypertarget{tracking_8cpp_a80970133e7290ddaa15b6d949fc99420}{\index{tracking.\-cpp@{tracking.\-cpp}!S\-\_\-\-M\-I\-N@{S\-\_\-\-M\-I\-N}}
\index{S\-\_\-\-M\-I\-N@{S\-\_\-\-M\-I\-N}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{S\-\_\-\-M\-I\-N}]{\setlength{\rightskip}{0pt plus 5cm}int S\-\_\-\-M\-I\-N = 121}}\label{tracking_8cpp_a80970133e7290ddaa15b6d949fc99420}


Référencé par main().

\hypertarget{tracking_8cpp_ae2de9b8731e1c54a74579610837e59c0}{\index{tracking.\-cpp@{tracking.\-cpp}!V\-\_\-\-M\-A\-X@{V\-\_\-\-M\-A\-X}}
\index{V\-\_\-\-M\-A\-X@{V\-\_\-\-M\-A\-X}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{V\-\_\-\-M\-A\-X}]{\setlength{\rightskip}{0pt plus 5cm}int V\-\_\-\-M\-A\-X = 255}}\label{tracking_8cpp_ae2de9b8731e1c54a74579610837e59c0}


Référencé par main().

\hypertarget{tracking_8cpp_a6238c0ecdac57d88d1f30259c60238cc}{\index{tracking.\-cpp@{tracking.\-cpp}!V\-\_\-\-M\-I\-N@{V\-\_\-\-M\-I\-N}}
\index{V\-\_\-\-M\-I\-N@{V\-\_\-\-M\-I\-N}!tracking.cpp@{tracking.\-cpp}}
\subsubsection[{V\-\_\-\-M\-I\-N}]{\setlength{\rightskip}{0pt plus 5cm}int V\-\_\-\-M\-I\-N = 100}}\label{tracking_8cpp_a6238c0ecdac57d88d1f30259c60238cc}


Référencé par main().

