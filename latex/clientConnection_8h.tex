\hypertarget{clientConnection_8h}{\section{Référence du fichier client\-Connection.\-h}
\label{clientConnection_8h}\index{client\-Connection.\-h@{client\-Connection.\-h}}
}
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$sys/types.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$netinet/in.\-h$>$}\\*
{\ttfamily \#include $<$netdb.\-h$>$}\\*
\subsection*{Fonctions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{clientConnection_8h_a4866b2d37ffc80c5ba705d3fcd1e0ecf}{error} (const char $\ast$msg)
\item 
int \hyperlink{clientConnection_8h_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\end{DoxyCompactItemize}


\subsection{Documentation des fonctions}
\hypertarget{clientConnection_8h_a4866b2d37ffc80c5ba705d3fcd1e0ecf}{\index{client\-Connection.\-h@{client\-Connection.\-h}!error@{error}}
\index{error@{error}!clientConnection.h@{client\-Connection.\-h}}
\subsubsection[{error}]{\setlength{\rightskip}{0pt plus 5cm}void error (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{msg}
\end{DoxyParamCaption}
)}}\label{clientConnection_8h_a4866b2d37ffc80c5ba705d3fcd1e0ecf}


Référencé par main().


\begin{DoxyCode}
11 \{
12     perror(msg);
13     exit(0);
14 \}
\end{DoxyCode}
\hypertarget{clientConnection_8h_a0ddf1224851353fc92bfbff6f499fa97}{\index{client\-Connection.\-h@{client\-Connection.\-h}!main@{main}}
\index{main@{main}!clientConnection.h@{client\-Connection.\-h}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{clientConnection_8h_a0ddf1224851353fc92bfbff6f499fa97}


Références error().


\begin{DoxyCode}
17 \{
18     \textcolor{keywordtype}{int} sockfd, portno, n;
19     \textcolor{keyword}{struct }sockaddr\_in serv\_addr;
20     \textcolor{keyword}{struct }hostent *server;
21 
22     \textcolor{keywordtype}{char} buffer[256];
23     \textcolor{keywordflow}{if} (argc < 3) \{
24        fprintf(stderr,\textcolor{stringliteral}{"usage %s hostname port\(\backslash\)n"}, argv[0]);
25        exit(0);
26     \}
27     portno = atoi(argv[2]);
28     sockfd = socket(AF\_INET, SOCK\_STREAM, 0);
29     \textcolor{keywordflow}{if} (sockfd < 0) 
30         \hyperlink{clientConnection_8h_a4866b2d37ffc80c5ba705d3fcd1e0ecf}{error}(\textcolor{stringliteral}{"ERROR opening socket"});
31     server = gethostbyname(argv[1]);
32     \textcolor{keywordflow}{if} (server == NULL) \{
33         fprintf(stderr,\textcolor{stringliteral}{"ERROR, no such host\(\backslash\)n"});
34         exit(0);
35     \}
36     bzero((\textcolor{keywordtype}{char} *) &serv\_addr, \textcolor{keyword}{sizeof}(serv\_addr));
37     serv\_addr.sin\_family = AF\_INET;
38     bcopy((\textcolor{keywordtype}{char} *)server->h\_addr, 
39          (\textcolor{keywordtype}{char} *)&serv\_addr.sin\_addr.s\_addr,
40          server->h\_length);
41     serv\_addr.sin\_port = htons(portno);
42     \textcolor{keywordflow}{if} (connect(sockfd,(\textcolor{keyword}{struct} sockaddr *) &serv\_addr,\textcolor{keyword}{sizeof}(serv\_addr)) < 0) 
43         \hyperlink{clientConnection_8h_a4866b2d37ffc80c5ba705d3fcd1e0ecf}{error}(\textcolor{stringliteral}{"ERROR connecting"});
44     printf(\textcolor{stringliteral}{"Please enter the message: "});
45     bzero(buffer,256);
46     fgets(buffer,255,stdin);
47     n = write(sockfd,buffer,strlen(buffer));
48     \textcolor{keywordflow}{if} (n < 0) 
49          \hyperlink{clientConnection_8h_a4866b2d37ffc80c5ba705d3fcd1e0ecf}{error}(\textcolor{stringliteral}{"ERROR writing to socket"});
50     bzero(buffer,256);
51     n = read(sockfd,buffer,255);
52     \textcolor{keywordflow}{if} (n < 0) 
53          \hyperlink{clientConnection_8h_a4866b2d37ffc80c5ba705d3fcd1e0ecf}{error}(\textcolor{stringliteral}{"ERROR reading from socket"});
54     printf(\textcolor{stringliteral}{"%s\(\backslash\)n"},buffer);
55     close(sockfd);
56     \textcolor{keywordflow}{return} 0;
57 \}\end{DoxyCode}
